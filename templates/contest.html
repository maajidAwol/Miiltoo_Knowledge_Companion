{% extends "base.html" %}  {%block body%}

<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quiz App</title>
  <style>
    label {
      display: block;
      margin-bottom: 10px;
    }
  </style>
</head>
 <body style="color:white">
  <h1>Contest</h1>
  <center>
  <form id="quiz-form">
    <div id="quiz-container"></div>
    <div id="results" style="display: none;"></div>
    <button type="button" id="submit-button">Submit Answers</button>
  </form>
</center>
  <script>
    const quizData = [
      // Section 1
      [
        {
          "question": "Question 1 (Section 1)",
          "choices": {
            "a": "Option A",
            "b": "Option B",
            "c": "Option C",
            "d": "Option D"
          },
          "answer": "a",
          "explanation": "Explanation for Question 1 (Section 1)"
        },
        {
          "question": "Question 2 (Section 1)",
          "choices": {
            "a": "Option A",
            "b": "Option B",
            "c": "Option C",
            "d": "Option D"
          },
          "answer": "b",
          "explanation": "Explanation for Question 2 (Section 1)"
        }
      ],
      // Section 2
      [
        {
          "question": "Question 1 (Section 2)",
          "choices": {
            "a": "Option A",
            "b": "Option B",
            "c": "Option C",
            "d": "Option D"
          },
          "answer": "c",
          "explanation": "Explanation for Question 1 (Section 2)"
        },
        {
          "question": "Question 2 (Section 2)",
          "choices": {
            "a": "Option A",
            "b": "Option B",
            "c": "Option C",
            "d": "Option D"
          },
          "answer": "a",
          "explanation": "Explanation for Question 2 (Section 2)"
        }
      ],[
        {
          "question": "Question 1 (Section 3)",
          "choices": {
            "a": "Option A",
            "b": "Option B",
            "c": "Option C",
            "d": "Option D"
          },
          "answer": "c",
          "explanation": "Explanation for Question 1 (Section 3)"
        },
        {
          "question": "Question 2 (Section 3)",
          "choices": {
            "a": "Option A",
            "b": "Option B",
            "c": "Option C",
            "d": "Option D"
          },
          "answer": "a",
          "explanation": "Explanation for Question 2 (Section 3)"
        }
      ]
    ];

    const quizContainer = document.getElementById('quiz-container');
    const resultsContainer = document.getElementById('results');
    const submitButton = document.getElementById('submit-button');

    function buildQuiz() {
      quizContainer.innerHTML = '';
      resultsContainer.style.display = 'none';

      quizData.forEach((section, sectionIndex) => {
        const sectionTitle = document.createElement('h2');
        sectionTitle.innerText = `Section ${sectionIndex + 1}`;
        quizContainer.appendChild(sectionTitle);

        section.forEach((question, questionIndex) => {
          const choices = Object.keys(question.choices);
          const questionElement = document.createElement('div');
          questionElement.innerHTML = `<p>${question.question}</p>`;

          choices.forEach(choice => {
            const choiceLabel = document.createElement('label');
            choiceLabel.innerHTML = `
              <input type="radio" name="question${sectionIndex}_${questionIndex}" value="${choice}" required>
              ${choice}: ${question.choices[choice]}
            `;
            questionElement.appendChild(choiceLabel);
          });

          quizContainer.appendChild(questionElement);
        });
      });

      submitButton.style.display = 'block';
    }

    function showResults() {
      resultsContainer.innerHTML = '';
      const sectionScores = [];

      quizData.forEach((section, sectionIndex) => {
        const sectionScore = {
          section: `Section ${sectionIndex + 1}`,
          correct: 0,
          total: section.length,
          results: []
        };

        section.forEach((question, questionIndex) => {
          const userAnswer = document.querySelector(`input[name="question${sectionIndex}_${questionIndex}"]:checked`);
          const correctAnswer = question.answer;

          if (userAnswer) {
            const userChoice = userAnswer.value;
            const explanation = question.explanation;
            const isCorrect = userChoice === correctAnswer;
            sectionScore.results.push({ question: question.question, isCorrect, explanation });
            if (isCorrect) {
              sectionScore.correct += 1;
            }
          }
        });

        sectionScores.push(sectionScore);
      });

      sectionScores.forEach(sectionScore => {
        const sectionTitle = document.createElement('h2');
        sectionTitle.innerText = sectionScore.section;
        resultsContainer.appendChild(sectionTitle);

        sectionScore.results.forEach(result => {
          const resultElement = document.createElement('div');
          resultElement.innerHTML = `
            <p>${result.question}</p>
            <p>${result.isCorrect ? "Correct" : "Incorrect"}</p>
            <p>Explanation: ${result.explanation}</p>
          `;
          resultsContainer.appendChild(resultElement);
        });

        const sectionEvaluation = document.createElement('p');
        sectionEvaluation.innerText = `Section Evaluation: ${sectionScore.correct} out of ${sectionScore.total}`;
        resultsContainer.appendChild(sectionEvaluation);
      });

      resultsContainer.style.display = 'block';
      submitButton.style.display = 'none';
    }

    submitButton.addEventListener('click', () => {
      showResults();
    });

    buildQuiz();
  </script>
</body>
</html>
{%endblock%}